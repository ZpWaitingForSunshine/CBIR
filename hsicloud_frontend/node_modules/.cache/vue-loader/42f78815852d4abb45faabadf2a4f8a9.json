{"remainingRequest":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\学习\\源码\\CBIR\\hsicloud_frontend\\src\\components\\ImageCropper\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\src\\components\\ImageCropper\\index.vue","mtime":1593408648000},{"path":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\学习\\源码\\CBIR\\hsicloud_frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCid1c2Ugc3RyaWN0JwppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnCmltcG9ydCBsYW5ndWFnZSBmcm9tICcuL3V0aWxzL2xhbmd1YWdlLmpzJwppbXBvcnQgbWltZXMgZnJvbSAnLi91dGlscy9taW1lcy5qcycKaW1wb3J0IGRhdGEyYmxvYiBmcm9tICcuL3V0aWxzL2RhdGEyYmxvYi5qcycKaW1wb3J0IGVmZmVjdFJpcHBsZSBmcm9tICcuL3V0aWxzL2VmZmVjdFJpcHBsZS5qcycKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICAvLyDln5/vvIzkuIrkvKDmlofku7ZuYW1l77yM6Kem5Y+R5LqL5Lu25Lya5bim5LiK77yI5aaC5p6c5LiA5Liq6aG16Z2i5aSa5Liq5Zu+54mH5LiK5Lyg5o6n5Lu277yM5Y+v5Lul5YGa5Yy65YiGCiAgICBmaWVsZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJ2F2YXRhcicKICAgIH0sCiAgICAvLyDljp/lkI1rZXnvvIznsbvkvLzkuo5pZO+8jOinpuWPkeS6i+S7tuS8muW4puS4iu+8iOWmguaenOS4gOS4qumhtemdouWkmuS4quWbvueJh+S4iuS8oOaOp+S7tu+8jOWPr+S7peWBmuWMuuWIhgogICAga2k6IHsKICAgICAgJ2RlZmF1bHQnOiAwCiAgICB9LAogICAgLy8g5pi+56S66K+l5o6n5Lu25LiO5ZCmCiAgICB2YWx1ZTogewogICAgICAnZGVmYXVsdCc6IHRydWUKICAgIH0sCiAgICAvLyDkuIrkvKDlnLDlnYAKICAgIHVybDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJycKICAgIH0sCiAgICAvLyDlhbbku5bopoHkuIrkvKDmlofku7bpmYTluKbnmoTmlbDmja7vvIzlr7nosaHmoLzlvI8KICAgIHBhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICdkZWZhdWx0JzogbnVsbAogICAgfSwKICAgIC8vIEFkZCBjdXN0b20gaGVhZGVycwogICAgaGVhZGVyczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgICdkZWZhdWx0JzogbnVsbAogICAgfSwKICAgIC8vIOWJquijgeWbvueJh+eahOWuvQogICAgd2lkdGg6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAyMDAKICAgIH0sCiAgICAvLyDliaroo4Hlm77niYfnmoTpq5gKICAgIGhlaWdodDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDIwMAogICAgfSwKICAgIC8vIOS4jeaYvuekuuaXi+i9rOWKn+iDvQogICAgbm9Sb3RhdGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8vIOS4jemihOiniOWchuW9ouWbvueJhwogICAgbm9DaXJjbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyDkuI3pooTop4jmlrnlvaLlm77niYcKICAgIG5vU3F1YXJlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5Y2V5paH5Lu25aSn5bCP6ZmQ5Yi2CiAgICBtYXhTaXplOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgJ2RlZmF1bHQnOiAxMDI0MAogICAgfSwKICAgIC8vIOivreiogOexu+WeiwogICAgbGFuZ1R5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICAnZGVmYXVsdCc6ICd6aCcKICAgIH0sCiAgICAvLyDor63oqIDljIUKICAgIGxhbmdFeHQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICAnZGVmYXVsdCc6IG51bGwKICAgIH0sCiAgICAvLyDlm77niYfkuIrkvKDmoLzlvI8KICAgIGltZ0Zvcm1hdDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICdkZWZhdWx0JzogJ3BuZycKICAgIH0sCiAgICAvLyDmmK/lkKbmlK/mjIHot6jln58KICAgIHdpdGhDcmVkZW50aWFsczogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICAnZGVmYXVsdCc6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgY29uc3QgdGhhdCA9IHRoaXMKICAgIGNvbnN0IHsKICAgICAgaW1nRm9ybWF0LAogICAgICBsYW5nVHlwZSwKICAgICAgbGFuZ0V4dCwKICAgICAgd2lkdGgsCiAgICAgIGhlaWdodAogICAgfSA9IHRoYXQKICAgIGxldCBpc1N1cHBvcnRlZCA9IHRydWUKICAgIGNvbnN0IGFsbG93SW1nRm9ybWF0ID0gWwogICAgICAnanBnJywKICAgICAgJ3BuZycKICAgIF0KICAgIGNvbnN0IHRlbXBJbWdGb3JtYXQgPSBhbGxvd0ltZ0Zvcm1hdC5pbmRleE9mKGltZ0Zvcm1hdCkgPT09IC0xID8gJ2pwZycgOiBpbWdGb3JtYXQKICAgIGNvbnN0IGxhbmcgPSBsYW5ndWFnZVtsYW5nVHlwZV0gPyBsYW5ndWFnZVtsYW5nVHlwZV0gOiBsYW5ndWFnZVsnZW4nXQogICAgY29uc3QgbWltZSA9IG1pbWVzW3RlbXBJbWdGb3JtYXRdCiAgICAvLyDop4TojIPlm77niYfmoLzlvI8KICAgIHRoYXQuaW1nRm9ybWF0ID0gdGVtcEltZ0Zvcm1hdAogICAgaWYgKGxhbmdFeHQpIHsKICAgICAgT2JqZWN0LmFzc2lnbihsYW5nLCBsYW5nRXh0KQogICAgfQogICAgaWYgKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ2Z1bmN0aW9uJykgewogICAgICBpc1N1cHBvcnRlZCA9IGZhbHNlCiAgICB9CiAgICByZXR1cm4gewogICAgICAvLyDlm77niYfnmoRtaW1lCiAgICAgIG1pbWUsCiAgICAgIC8vIOivreiogOWMhQogICAgICBsYW5nLAogICAgICAvLyDmtY/op4jlmajmmK/lkKbmlK/mjIHor6Xmjqfku7YKICAgICAgaXNTdXBwb3J0ZWQsCiAgICAgIC8vIOa1j+iniOWZqOaYr+WQpuaUr+aMgeinpuWxj+S6i+S7tgogICAgICBpc1N1cHBvcnRUb3VjaDogZG9jdW1lbnQuaGFzT3duUHJvcGVydHkoJ29udG91Y2hzdGFydCcpLAogICAgICAvLyDmraXpqqQKICAgICAgc3RlcDogMSwgLy8gMemAieaLqeaWh+S7tiAy5Ymq6KOBIDPkuIrkvKAKICAgICAgLy8g5LiK5Lyg54q25oCB5Y+K6L+b5bqmCiAgICAgIGxvYWRpbmc6IDAsIC8vIDDmnKrlvIDlp4sgMeato+WcqCAy5oiQ5YqfIDPplJnor68KICAgICAgcHJvZ3Jlc3M6IDAsCiAgICAgIC8vIOaYr+WQpuaciemUmeivr+WPiumUmeivr+S/oeaBrwogICAgICBoYXNFcnJvcjogZmFsc2UsCiAgICAgIGVycm9yTXNnOiAnJywKICAgICAgLy8g6ZyA5rGC5Zu+5a696auY5q+UCiAgICAgIHJhdGlvOiB3aWR0aCAvIGhlaWdodCwKICAgICAgLy8g5Y6f5Zu+5Zyw5Z2A44CB55Sf5oiQ5Zu+54mH5Zyw5Z2ACiAgICAgIHNvdXJjZUltZzogbnVsbCwKICAgICAgc291cmNlSW1nVXJsOiAnJywKICAgICAgY3JlYXRlSW1nVXJsOiAnJywKICAgICAgLy8g5Y6f5Zu+54mH5ouW5Yqo5LqL5Lu25Yid5aeL5YC8CiAgICAgIHNvdXJjZUltZ01vdXNlRG93bjogewogICAgICAgIG9uOiBmYWxzZSwKICAgICAgICBtWDogMCwgLy8g6byg5qCH5oyJ5LiL55qE5Z2Q5qCHCiAgICAgICAgbVk6IDAsCiAgICAgICAgeDogMCwgLy8gc2NhbGXljp/lm77lnZDmoIcKICAgICAgICB5OiAwCiAgICAgIH0sCiAgICAgIC8vIOeUn+aIkOWbvueJh+mihOiniOeahOWuueWZqOWkp+WwjwogICAgICBwcmV2aWV3Q29udGFpbmVyOiB7CiAgICAgICAgd2lkdGg6IDEwMCwKICAgICAgICBoZWlnaHQ6IDEwMAogICAgICB9LAogICAgICAvLyDljp/lm77lrrnlmajlrr3pq5gKICAgICAgc291cmNlSW1nQ29udGFpbmVyOiB7IC8vIHNpYwogICAgICAgIHdpZHRoOiAyNDAsCiAgICAgICAgaGVpZ2h0OiAxODQgLy8g5aaC5p6c55Sf5oiQ5Zu+5q+U5L6L5LiO5q2k5LiA6Ie05Lya5Ye6546wYnVn77yM5YWI5pS55oiQ54m55q6K55qE5qC85byP5ZCn77yM5ZOI5ZOI5ZOICiAgICAgIH0sCiAgICAgIC8vIOWOn+WbvuWxleekuuWxnuaApwogICAgICBzY2FsZTogewogICAgICAgIHpvb21BZGRPbjogZmFsc2UsIC8vIOaMiemSrue8qeaUvuS6i+S7tuW8gOWQrwogICAgICAgIHpvb21TdWJPbjogZmFsc2UsIC8vIOaMiemSrue8qeaUvuS6i+S7tuW8gOWQrwogICAgICAgIHJhbmdlOiAxLCAvLyDmnIDlpKcxMDAKICAgICAgICByb3RhdGVMZWZ0OiBmYWxzZSwgLy8g5oyJ6ZKu5ZCR5bem5peL6L2s5LqL5Lu25byA5ZCvCiAgICAgICAgcm90YXRlUmlnaHQ6IGZhbHNlLCAvLyDmjInpkq7lkJHlj7Pml4vovazkuovku7blvIDlkK8KICAgICAgICBkZWdyZWU6IDAsIC8vIOaXi+i9rOW6puaVsAogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgICB3aWR0aDogMCwKICAgICAgICBoZWlnaHQ6IDAsCiAgICAgICAgbWF4V2lkdGg6IDAsCiAgICAgICAgbWF4SGVpZ2h0OiAwLAogICAgICAgIG1pbldpZHRoOiAwLCAvLyDmnIDlrr0KICAgICAgICBtaW5IZWlnaHQ6IDAsCiAgICAgICAgbmF0dXJhbFdpZHRoOiAwLCAvLyDljp/lrr0KICAgICAgICBuYXR1cmFsSGVpZ2h0OiAwCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyDov5vluqbmnaHmoLflvI8KICAgIHByb2dyZXNzU3R5bGUoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBwcm9ncmVzcwogICAgICB9ID0gdGhpcwogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiBwcm9ncmVzcyArICclJwogICAgICB9CiAgICB9LAogICAgLy8g5Y6f5Zu+5qC35byPCiAgICBzb3VyY2VJbWdTdHlsZSgpIHsKICAgICAgY29uc3QgewogICAgICAgIHNjYWxlLAogICAgICAgIHNvdXJjZUltZ01hc2tpbmcKICAgICAgfSA9IHRoaXMKICAgICAgY29uc3QgdG9wID0gc2NhbGUueSArIHNvdXJjZUltZ01hc2tpbmcueSArICdweCcKICAgICAgY29uc3QgbGVmdCA9IHNjYWxlLnggKyBzb3VyY2VJbWdNYXNraW5nLnggKyAncHgnCiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wLAogICAgICAgIGxlZnQsCiAgICAgICAgd2lkdGg6IHNjYWxlLndpZHRoICsgJ3B4JywKICAgICAgICBoZWlnaHQ6IHNjYWxlLmhlaWdodCArICdweCcsCiAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKCcgKyBzY2FsZS5kZWdyZWUgKyAnZGVnKScsIC8vIOaXi+i9rOaXtiDlt6bkvqfljp/lp4vlm77ml4vovazmoLflvI8KICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIHNjYWxlLmRlZ3JlZSArICdkZWcpJywgLy8g5YW85a65SUU5CiAgICAgICAgJy1tb3otdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgc2NhbGUuZGVncmVlICsgJ2RlZyknLCAvLyDlhbzlrrlGaXJlRm94CiAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgc2NhbGUuZGVncmVlICsgJ2RlZyknLCAvLyDlhbzlrrlTYWZhcmkg5ZKMIGNocm9tZQogICAgICAgICctby10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBzY2FsZS5kZWdyZWUgKyAnZGVnKScgLy8g5YW85a65IE9wZXJhCiAgICAgIH0KICAgIH0sCiAgICAvLyDljp/lm77okpnniYjlsZ7mgKcKICAgIHNvdXJjZUltZ01hc2tpbmcoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgcmF0aW8sCiAgICAgICAgc291cmNlSW1nQ29udGFpbmVyCiAgICAgIH0gPSB0aGlzCiAgICAgIGNvbnN0IHNpYyA9IHNvdXJjZUltZ0NvbnRhaW5lcgogICAgICBjb25zdCBzaWNSYXRpbyA9IHNpYy53aWR0aCAvIHNpYy5oZWlnaHQgLy8g5Y6f5Zu+5a655Zmo5a696auY5q+UCiAgICAgIGxldCB4ID0gMAogICAgICBsZXQgeSA9IDAKICAgICAgbGV0IHcgPSBzaWMud2lkdGgKICAgICAgbGV0IGggPSBzaWMuaGVpZ2h0CiAgICAgIGxldCBzY2FsZSA9IDEKICAgICAgaWYgKHJhdGlvIDwgc2ljUmF0aW8pIHsKICAgICAgICBzY2FsZSA9IHNpYy5oZWlnaHQgLyBoZWlnaHQKICAgICAgICB3ID0gc2ljLmhlaWdodCAqIHJhdGlvCiAgICAgICAgeCA9IChzaWMud2lkdGggLSB3KSAvIDIKICAgICAgfQogICAgICBpZiAocmF0aW8gPiBzaWNSYXRpbykgewogICAgICAgIHNjYWxlID0gc2ljLndpZHRoIC8gd2lkdGgKICAgICAgICBoID0gc2ljLndpZHRoIC8gcmF0aW8KICAgICAgICB5ID0gKHNpYy5oZWlnaHQgLSBoKSAvIDIKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIHNjYWxlLCAvLyDokpnniYjnm7jlr7npnIDmsYLlrr3pq5jnmoTnvKnmlL4KICAgICAgICB4LAogICAgICAgIHksCiAgICAgICAgd2lkdGg6IHcsCiAgICAgICAgaGVpZ2h0OiBoCiAgICAgIH0KICAgIH0sCiAgICAvLyDljp/lm77pga7nvanmoLflvI8KICAgIHNvdXJjZUltZ1NoYWRlU3R5bGUoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIHNvdXJjZUltZ0NvbnRhaW5lcgogICAgICB9ID0gdGhpcwogICAgICBjb25zdCBzaWMgPSBzb3VyY2VJbWdDb250YWluZXIKICAgICAgY29uc3Qgc2ltID0gc291cmNlSW1nTWFza2luZwogICAgICBjb25zdCB3ID0gc2ltLndpZHRoID09IHNpYy53aWR0aCA/IHNpbS53aWR0aCA6IChzaWMud2lkdGggLSBzaW0ud2lkdGgpIC8gMgogICAgICBjb25zdCBoID0gc2ltLmhlaWdodCA9PSBzaWMuaGVpZ2h0ID8gc2ltLmhlaWdodCA6IChzaWMuaGVpZ2h0IC0gc2ltLmhlaWdodCkgLyAyCiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHcgKyAncHgnLAogICAgICAgIGhlaWdodDogaCArICdweCcKICAgICAgfQogICAgfSwKICAgIHByZXZpZXdTdHlsZSgpIHsKICAgICAgY29uc3QgewogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICByYXRpbywKICAgICAgICBwcmV2aWV3Q29udGFpbmVyCiAgICAgIH0gPSB0aGlzCiAgICAgIGNvbnN0IHBjID0gcHJldmlld0NvbnRhaW5lcgogICAgICBsZXQgdyA9IHBjLndpZHRoCiAgICAgIGxldCBoID0gcGMuaGVpZ2h0CiAgICAgIGNvbnN0IHBjUmF0aW8gPSB3IC8gaAogICAgICBpZiAocmF0aW8gPCBwY1JhdGlvKSB7CiAgICAgICAgdyA9IHBjLmhlaWdodCAqIHJhdGlvCiAgICAgIH0KICAgICAgaWYgKHJhdGlvID4gcGNSYXRpbykgewogICAgICAgIGggPSBwYy53aWR0aCAvIHJhdGlvCiAgICAgIH0KICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdyArICdweCcsCiAgICAgICAgaGVpZ2h0OiBoICsgJ3B4JwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWUobmV3VmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlICYmIHRoaXMubG9hZGluZyAhPSAxKSB7CiAgICAgICAgdGhpcy5yZXNldCgpCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+azoue6ueaViOaenAogICAgcmlwcGxlKGUpIHsKICAgICAgZWZmZWN0UmlwcGxlKGUpCiAgICB9LAogICAgLy8g5YWz6Zet5o6n5Lu2CiAgICBvZmYoKSB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZmFsc2UpCiAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKQogICAgICAgIGlmICh0aGlzLnN0ZXAgPT0gMyAmJiB0aGlzLmxvYWRpbmcgPT0gMikgewogICAgICAgICAgdGhpcy5zZXRTdGVwKDEpCiAgICAgICAgfQogICAgICB9LCAyMDApCiAgICB9LAogICAgLy8g6K6+572u5q2l6aqkCiAgICBzZXRTdGVwKG5vKSB7CiAgICAgIC8vIOW7tuaXtuaYr+S4uuS6huaYvuekuuWKqOeUu+aViOaenOWRou+8jOWTiOWTiOWTiAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLnN0ZXAgPSBubwogICAgICB9LCAyMDApCiAgICB9LAogICAgLyog5Zu+54mH6YCJ5oup5Yy65Z+f5Ye95pWw57uR5a6aCiAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi8KICAgIHByZXZlbnREZWZhdWx0KGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKICAgIGhhbmRsZUNsaWNrKGUpIHsKICAgICAgaWYgKHRoaXMubG9hZGluZyAhPT0gMSkgewogICAgICAgIGlmIChlLnRhcmdldCAhPT0gdGhpcy4kcmVmcy5maWxlaW5wdXQpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMuJHJlZnMpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5maWxlaW5wdXQuY2xpY2soKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNoYW5nZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICBpZiAodGhpcy5sb2FkaW5nICE9PSAxKSB7CiAgICAgICAgY29uc3QgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlcwogICAgICAgIHRoaXMucmVzZXQoKQogICAgICAgIGlmICh0aGlzLmNoZWNrRmlsZShmaWxlc1swXSkpIHsKICAgICAgICAgIHRoaXMuc2V0U291cmNlSW1nKGZpbGVzWzBdKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovCiAgICAvLyDmo4DmtYvpgInmi6nnmoTmlofku7bmmK/lkKblkIjpgIIKICAgIGNoZWNrRmlsZShmaWxlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBsYW5nLAogICAgICAgICAgbWF4U2l6ZQogICAgICAgIH0gPSB0aGF0CiAgICAgIC8vIOS7hemZkOWbvueJhwogICAgICBpZiAoZmlsZS50eXBlLmluZGV4T2YoJ2ltYWdlJykgPT09IC0xKSB7CiAgICAgICAgdGhhdC5oYXNFcnJvciA9IHRydWUKICAgICAgICB0aGF0LmVycm9yTXNnID0gbGFuZy5lcnJvci5vbmx5SW1nCiAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgIH0KICAgICAgLy8g6LaF5Ye65aSn5bCPCiAgICAgIGlmIChmaWxlLnNpemUgLyAxMDI0ID4gbWF4U2l6ZSkgewogICAgICAgIHRoYXQuaGFzRXJyb3IgPSB0cnVlCiAgICAgICAgdGhhdC5lcnJvck1zZyA9IGxhbmcuZXJyb3Iub3V0T2ZTaXplICsgbWF4U2l6ZSArICdrYicKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZQogICAgfSwKICAgIC8vIOmHjee9ruaOp+S7tgogICAgcmVzZXQoKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIHRoYXQubG9hZGluZyA9IDAKICAgICAgdGhhdC5oYXNFcnJvciA9IGZhbHNlCiAgICAgIHRoYXQuZXJyb3JNc2cgPSAnJwogICAgICB0aGF0LnByb2dyZXNzID0gMAogICAgfSwKICAgIC8vIOiuvue9ruWbvueJh+a6kAogICAgc2V0U291cmNlSW1nKGZpbGUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzLAogICAgICAgIGZyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICBmci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgdGhhdC5zb3VyY2VJbWdVcmwgPSBmci5yZXN1bHQKICAgICAgICB0aGF0LnN0YXJ0Q3JvcCgpCiAgICAgIH0KICAgICAgZnIucmVhZEFzRGF0YVVSTChmaWxlKQogICAgfSwKICAgIC8vIOWJquijgeWJjeWHhuWkh+W3peS9nAogICAgc3RhcnRDcm9wKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXMsCiAgICAgICAgewogICAgICAgICAgd2lkdGgsCiAgICAgICAgICBoZWlnaHQsCiAgICAgICAgICByYXRpbywKICAgICAgICAgIHNjYWxlLAogICAgICAgICAgc291cmNlSW1nVXJsLAogICAgICAgICAgc291cmNlSW1nTWFza2luZywKICAgICAgICAgIGxhbmcKICAgICAgICB9ID0gdGhhdCwKICAgICAgICBzaW0gPSBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIGltZyA9IG5ldyBJbWFnZSgpCiAgICAgIGltZy5zcmMgPSBzb3VyY2VJbWdVcmwKICAgICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIGxldCBuV2lkdGggPSBpbWcubmF0dXJhbFdpZHRoLAogICAgICAgICAgbkhlaWdodCA9IGltZy5uYXR1cmFsSGVpZ2h0LAogICAgICAgICAgblJhdGlvID0gbldpZHRoIC8gbkhlaWdodCwKICAgICAgICAgIHcgPSBzaW0ud2lkdGgsCiAgICAgICAgICBoID0gc2ltLmhlaWdodCwKICAgICAgICAgIHggPSAwLAogICAgICAgICAgeSA9IDAKICAgICAgICAvLyDlm77niYflg4/ntKDkuI3ovr7moIcKICAgICAgICBpZiAobldpZHRoIDwgd2lkdGggfHwgbkhlaWdodCA8IGhlaWdodCkgewogICAgICAgICAgdGhhdC5oYXNFcnJvciA9IHRydWUKICAgICAgICAgIHRoYXQuZXJyb3JNc2cgPSBsYW5nLmVycm9yLmxvd2VzdFB4ICsgd2lkdGggKyAnKicgKyBoZWlnaHQKICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgIH0KICAgICAgICBpZiAocmF0aW8gPiBuUmF0aW8pIHsKICAgICAgICAgIGggPSB3IC8gblJhdGlvCiAgICAgICAgICB5ID0gKHNpbS5oZWlnaHQgLSBoKSAvIDIKICAgICAgICB9CiAgICAgICAgaWYgKHJhdGlvIDwgblJhdGlvKSB7CiAgICAgICAgICB3ID0gaCAqIG5SYXRpbwogICAgICAgICAgeCA9IChzaW0ud2lkdGggLSB3KSAvIDIKICAgICAgICB9CiAgICAgICAgc2NhbGUucmFuZ2UgPSAwCiAgICAgICAgc2NhbGUueCA9IHgKICAgICAgICBzY2FsZS55ID0geQogICAgICAgIHNjYWxlLndpZHRoID0gdwogICAgICAgIHNjYWxlLmhlaWdodCA9IGgKICAgICAgICBzY2FsZS5kZWdyZWUgPSAwCiAgICAgICAgc2NhbGUubWluV2lkdGggPSB3CiAgICAgICAgc2NhbGUubWluSGVpZ2h0ID0gaAogICAgICAgIHNjYWxlLm1heFdpZHRoID0gbldpZHRoICogc2ltLnNjYWxlCiAgICAgICAgc2NhbGUubWF4SGVpZ2h0ID0gbkhlaWdodCAqIHNpbS5zY2FsZQogICAgICAgIHNjYWxlLm5hdHVyYWxXaWR0aCA9IG5XaWR0aAogICAgICAgIHNjYWxlLm5hdHVyYWxIZWlnaHQgPSBuSGVpZ2h0CiAgICAgICAgdGhhdC5zb3VyY2VJbWcgPSBpbWcKICAgICAgICB0aGF0LmNyZWF0ZUltZygpCiAgICAgICAgdGhhdC5zZXRTdGVwKDIpCiAgICAgIH0KICAgIH0sCiAgICAvLyDpvKDmoIfmjInkuIvlm77niYflh4blpIfnp7vliqgKICAgIGltZ1N0YXJ0TW92ZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAvLyDmlK/mjIHop6bmkbjkuovku7bvvIzliJnpvKDmoIfkuovku7bml6DmlYgKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGxldCBldCA9IGUudGFyZ2V0VG91Y2hlcyA/IGUudGFyZ2V0VG91Y2hlc1swXSA6IGUsCiAgICAgICAgewogICAgICAgICAgc291cmNlSW1nTW91c2VEb3duLAogICAgICAgICAgc2NhbGUKICAgICAgICB9ID0gdGhpcywKICAgICAgICBzaW1kID0gc291cmNlSW1nTW91c2VEb3duCiAgICAgIHNpbWQubVggPSBldC5zY3JlZW5YCiAgICAgIHNpbWQubVkgPSBldC5zY3JlZW5ZCiAgICAgIHNpbWQueCA9IHNjYWxlLngKICAgICAgc2ltZC55ID0gc2NhbGUueQogICAgICBzaW1kLm9uID0gdHJ1ZQogICAgfSwKICAgIC8vIOm8oOagh+aMieS4i+eKtuaAgeS4i+enu+WKqO+8jOWbvueJh+enu+WKqAogICAgaW1nTW92ZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICAvLyDmlK/mjIHop6bmkbjkuovku7bvvIzliJnpvKDmoIfkuovku7bml6DmlYgKICAgICAgaWYgKHRoaXMuaXNTdXBwb3J0VG91Y2ggJiYgIWUudGFyZ2V0VG91Y2hlcykgewogICAgICAgIHJldHVybiBmYWxzZQogICAgICB9CiAgICAgIGxldCBldCA9IGUudGFyZ2V0VG91Y2hlcyA/IGUudGFyZ2V0VG91Y2hlc1swXSA6IGUsCiAgICAgICAgewogICAgICAgICAgc291cmNlSW1nTW91c2VEb3duOiB7CiAgICAgICAgICAgIG9uLAogICAgICAgICAgICBtWCwKICAgICAgICAgICAgbVksCiAgICAgICAgICAgIHgsCiAgICAgICAgICAgIHkKICAgICAgICAgIH0sCiAgICAgICAgICBzY2FsZSwKICAgICAgICAgIHNvdXJjZUltZ01hc2tpbmcKICAgICAgICB9ID0gdGhpcywKICAgICAgICBzaW0gPSBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIG5YID0gZXQuc2NyZWVuWCwKICAgICAgICBuWSA9IGV0LnNjcmVlblksCiAgICAgICAgZFggPSBuWCAtIG1YLAogICAgICAgIGRZID0gblkgLSBtWSwKICAgICAgICByWCA9IHggKyBkWCwKICAgICAgICByWSA9IHkgKyBkWQogICAgICBpZiAoIW9uKSByZXR1cm4KICAgICAgaWYgKHJYID4gMCkgewogICAgICAgIHJYID0gMAogICAgICB9CiAgICAgIGlmIChyWSA+IDApIHsKICAgICAgICByWSA9IDAKICAgICAgfQogICAgICBpZiAoclggPCBzaW0ud2lkdGggLSBzY2FsZS53aWR0aCkgewogICAgICAgIHJYID0gc2ltLndpZHRoIC0gc2NhbGUud2lkdGgKICAgICAgfQogICAgICBpZiAoclkgPCBzaW0uaGVpZ2h0IC0gc2NhbGUuaGVpZ2h0KSB7CiAgICAgICAgclkgPSBzaW0uaGVpZ2h0IC0gc2NhbGUuaGVpZ2h0CiAgICAgIH0KICAgICAgc2NhbGUueCA9IHJYCiAgICAgIHNjYWxlLnkgPSByWQogICAgfSwKICAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vlkJHlj7Pml4vovawKICAgIHN0YXJ0Um90YXRlUmlnaHQoZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXMsCiAgICAgICAgewogICAgICAgICAgc2NhbGUKICAgICAgICB9ID0gdGhhdAogICAgICBzY2FsZS5yb3RhdGVSaWdodCA9IHRydWUKICAgICAgZnVuY3Rpb24gcm90YXRlKCkgewogICAgICAgIGlmIChzY2FsZS5yb3RhdGVSaWdodCkgewogICAgICAgICAgY29uc3QgZGVncmVlID0gKytzY2FsZS5kZWdyZWUKICAgICAgICAgIHRoYXQuY3JlYXRlSW1nKGRlZ3JlZSkKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJvdGF0ZSgpCiAgICAgICAgICB9LCA2MCkKICAgICAgICB9CiAgICAgIH0KICAgICAgcm90YXRlKCkKICAgIH0sCiAgICAvLyDmjInpkq7mjInkuIvlvIDlp4vlkJHlj7Pml4vovawKICAgIHN0YXJ0Um90YXRlTGVmdChlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBzY2FsZQogICAgICAgIH0gPSB0aGF0CiAgICAgIHNjYWxlLnJvdGF0ZUxlZnQgPSB0cnVlCiAgICAgIGZ1bmN0aW9uIHJvdGF0ZSgpIHsKICAgICAgICBpZiAoc2NhbGUucm90YXRlTGVmdCkgewogICAgICAgICAgY29uc3QgZGVncmVlID0gLS1zY2FsZS5kZWdyZWUKICAgICAgICAgIHRoYXQuY3JlYXRlSW1nKGRlZ3JlZSkKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJvdGF0ZSgpCiAgICAgICAgICB9LCA2MCkKICAgICAgICB9CiAgICAgIH0KICAgICAgcm90YXRlKCkKICAgIH0sCiAgICAvLyDlgZzmraLml4vovawKICAgIGVuZFJvdGF0ZSgpIHsKICAgICAgY29uc3QgewogICAgICAgIHNjYWxlCiAgICAgIH0gPSB0aGlzCiAgICAgIHNjYWxlLnJvdGF0ZUxlZnQgPSBmYWxzZQogICAgICBzY2FsZS5yb3RhdGVSaWdodCA9IGZhbHNlCiAgICB9LAogICAgLy8g5oyJ6ZKu5oyJ5LiL5byA5aeL5pS+5aSnCiAgICBzdGFydFpvb21BZGQoZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXMsCiAgICAgICAgewogICAgICAgICAgc2NhbGUKICAgICAgICB9ID0gdGhhdAogICAgICBzY2FsZS56b29tQWRkT24gPSB0cnVlCiAgICAgIGZ1bmN0aW9uIHpvb20oKSB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21BZGRPbikgewogICAgICAgICAgY29uc3QgcmFuZ2UgPSBzY2FsZS5yYW5nZSA+PSAxMDAgPyAxMDAgOiArK3NjYWxlLnJhbmdlCiAgICAgICAgICB0aGF0Lnpvb21JbWcocmFuZ2UpCiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICB6b29tKCkKICAgICAgICAgIH0sIDYwKQogICAgICAgIH0KICAgICAgfQogICAgICB6b29tKCkKICAgIH0sCiAgICAvLyDmjInpkq7mnb7lvIDmiJbnp7vlvIDlj5bmtojmlL7lpKcKICAgIGVuZFpvb21BZGQoZSkgewogICAgICB0aGlzLnNjYWxlLnpvb21BZGRPbiA9IGZhbHNlCiAgICB9LAogICAgLy8g5oyJ6ZKu5oyJ5LiL5byA5aeL57yp5bCPCiAgICBzdGFydFpvb21TdWIoZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXMsCiAgICAgICAgewogICAgICAgICAgc2NhbGUKICAgICAgICB9ID0gdGhhdAogICAgICBzY2FsZS56b29tU3ViT24gPSB0cnVlCiAgICAgIGZ1bmN0aW9uIHpvb20oKSB7CiAgICAgICAgaWYgKHNjYWxlLnpvb21TdWJPbikgewogICAgICAgICAgY29uc3QgcmFuZ2UgPSBzY2FsZS5yYW5nZSA8PSAwID8gMCA6IC0tc2NhbGUucmFuZ2UKICAgICAgICAgIHRoYXQuem9vbUltZyhyYW5nZSkKICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHpvb20oKQogICAgICAgICAgfSwgNjApCiAgICAgICAgfQogICAgICB9CiAgICAgIHpvb20oKQogICAgfSwKICAgIC8vIOaMiemSruadvuW8gOaIluenu+W8gOWPlua2iOe8qeWwjwogICAgZW5kWm9vbVN1YihlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBzY2FsZQogICAgICB9ID0gdGhpcwogICAgICBzY2FsZS56b29tU3ViT24gPSBmYWxzZQogICAgfSwKICAgIHpvb21DaGFuZ2UoZSkgewogICAgICB0aGlzLnpvb21JbWcoZS50YXJnZXQudmFsdWUpCiAgICB9LAogICAgLy8g57yp5pS+5Y6f5Zu+CiAgICB6b29tSW1nKG5ld1JhbmdlKSB7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzCiAgICAgIGNvbnN0IHsKICAgICAgICBzb3VyY2VJbWdNYXNraW5nLAogICAgICAgIHNvdXJjZUltZ01vdXNlRG93biwKICAgICAgICBzY2FsZQogICAgICB9ID0gdGhpcwogICAgICBjb25zdCB7CiAgICAgICAgbWF4V2lkdGgsCiAgICAgICAgbWF4SGVpZ2h0LAogICAgICAgIG1pbldpZHRoLAogICAgICAgIG1pbkhlaWdodCwKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgeCwKICAgICAgICB5LAogICAgICAgIHJhbmdlCiAgICAgIH0gPSBzY2FsZQogICAgICBjb25zdCBzaW0gPSBzb3VyY2VJbWdNYXNraW5nCiAgICAgIC8vIOiSmeeJiOWuvemrmAogICAgICBjb25zdCBzV2lkdGggPSBzaW0ud2lkdGgKICAgICAgY29uc3Qgc0hlaWdodCA9IHNpbS5oZWlnaHQKICAgICAgLy8g5paw5a696auYCiAgICAgIGNvbnN0IG5XaWR0aCA9IG1pbldpZHRoICsgKG1heFdpZHRoIC0gbWluV2lkdGgpICogbmV3UmFuZ2UgLyAxMDAKICAgICAgY29uc3QgbkhlaWdodCA9IG1pbkhlaWdodCArIChtYXhIZWlnaHQgLSBtaW5IZWlnaHQpICogbmV3UmFuZ2UgLyAxMDAKICAgICAgLy8g5paw5Z2Q5qCH77yI5qC55o2u6JKZ54mI5Lit5b+D54K557yp5pS+77yJCiAgICAgIGxldCBuWCA9IHNXaWR0aCAvIDIgLSAobldpZHRoIC8gd2lkdGgpICogKHNXaWR0aCAvIDIgLSB4KQogICAgICBsZXQgblkgPSBzSGVpZ2h0IC8gMiAtIChuSGVpZ2h0IC8gaGVpZ2h0KSAqIChzSGVpZ2h0IC8gMiAtIHkpCiAgICAgIC8vIOWIpOaWreaWsOWdkOagh+aYr+WQpui2hei/h+iSmeeJiOmZkOWItgogICAgICBpZiAoblggPiAwKSB7CiAgICAgICAgblggPSAwCiAgICAgIH0KICAgICAgaWYgKG5ZID4gMCkgewogICAgICAgIG5ZID0gMAogICAgICB9CiAgICAgIGlmIChuWCA8IHNXaWR0aCAtIG5XaWR0aCkgewogICAgICAgIG5YID0gc1dpZHRoIC0gbldpZHRoCiAgICAgIH0KICAgICAgaWYgKG5ZIDwgc0hlaWdodCAtIG5IZWlnaHQpIHsKICAgICAgICBuWSA9IHNIZWlnaHQgLSBuSGVpZ2h0CiAgICAgIH0KICAgICAgLy8g6LWL5YC85aSE55CGCiAgICAgIHNjYWxlLnggPSBuWAogICAgICBzY2FsZS55ID0gblkKICAgICAgc2NhbGUud2lkdGggPSBuV2lkdGgKICAgICAgc2NhbGUuaGVpZ2h0ID0gbkhlaWdodAogICAgICBzY2FsZS5yYW5nZSA9IG5ld1JhbmdlCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKHNjYWxlLnJhbmdlID09IG5ld1JhbmdlKSB7CiAgICAgICAgICB0aGF0LmNyZWF0ZUltZygpCiAgICAgICAgfQogICAgICB9LCAzMDApCiAgICB9LAogICAgIC8vIOeUn+aIkOmcgOaxguWbvueJhwogICAgY3JlYXRlSW1nKGUpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzLAogICAgICAgIHsKICAgICAgICAgIG1pbWUsCiAgICAgICAgICBzb3VyY2VJbWcsCiAgICAgICAgICBzY2FsZTogewogICAgICAgICAgICB4LAogICAgICAgICAgICB5LAogICAgICAgICAgICB3aWR0aCwKICAgICAgICAgICAgaGVpZ2h0LAogICAgICAgICAgICBkZWdyZWUKICAgICAgICAgIH0sCiAgICAgICAgICBzb3VyY2VJbWdNYXNraW5nOiB7CiAgICAgICAgICAgIHNjYWxlCiAgICAgICAgICB9CiAgICAgICAgfSA9IHRoYXQsCiAgICAgICAgY2FudmFzID0gdGhhdC4kcmVmcy5jYW52YXMsCiAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJykKICAgICAgaWYgKGUpIHsKICAgICAgICAvLyDlj5bmtojpvKDmoIfmjInkuIvnp7vliqjnirbmgIEKICAgICAgICB0aGF0LnNvdXJjZUltZ01vdXNlRG93bi5vbiA9IGZhbHNlCiAgICAgIH0KICAgICAgY2FudmFzLndpZHRoID0gdGhhdC53aWR0aAogICAgICBjYW52YXMuaGVpZ2h0ID0gdGhhdC5oZWlnaHQKICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGF0LndpZHRoLCB0aGF0LmhlaWdodCkKICAgICAgLy8g5bCG6YCP5piO5Yy65Z+f6K6+572u5Li655m96Imy5bqV6L65CiAgICAgIGN0eC5maWxsU3R5bGUgPSAnI2ZmZicKICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHRoYXQud2lkdGgsIHRoYXQuaGVpZ2h0KQogICAgICBjdHgudHJhbnNsYXRlKHRoYXQud2lkdGggKiAwLjUsIHRoYXQuaGVpZ2h0ICogMC41KQogICAgICBjdHgucm90YXRlKE1hdGguUEkgKiBkZWdyZWUgLyAxODApCiAgICAgIGN0eC50cmFuc2xhdGUoLXRoYXQud2lkdGggKiAwLjUsIC10aGF0LmhlaWdodCAqIDAuNSkKICAgICAgY3R4LmRyYXdJbWFnZShzb3VyY2VJbWcsIHggLyBzY2FsZSwgeSAvIHNjYWxlLCB3aWR0aCAvIHNjYWxlLCBoZWlnaHQgLyBzY2FsZSkKICAgICAgdGhhdC5jcmVhdGVJbWdVcmwgPSBjYW52YXMudG9EYXRhVVJMKG1pbWUpCiAgICB9LAogICAgcHJlcGFyZVVwbG9hZCgpIHsKICAgICAgY29uc3QgewogICAgICAgIHVybCwKICAgICAgICBjcmVhdGVJbWdVcmwsCiAgICAgICAgZmllbGQsCiAgICAgICAga2kKICAgICAgfSA9IHRoaXMKICAgICAgdGhpcy4kZW1pdCgnY3JvcC1zdWNjZXNzJywgY3JlYXRlSW1nVXJsLCBmaWVsZCwga2kpCiAgICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJyAmJiB1cmwpIHsKICAgICAgICB0aGlzLnVwbG9hZCgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vZmYoKQogICAgICB9CiAgICB9LAogICAgLy8g5LiK5Lyg5Zu+54mHCiAgICB1cGxvYWQoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICB7CiAgICAgICAgICBsYW5nLAogICAgICAgICAgaW1nRm9ybWF0LAogICAgICAgICAgbWltZSwKICAgICAgICAgIHVybCwKICAgICAgICAgIHBhcmFtcywKICAgICAgICAgIGhlYWRlcnMsCiAgICAgICAgICBmaWVsZCwKICAgICAgICAgIGtpLAogICAgICAgICAgY3JlYXRlSW1nVXJsLAogICAgICAgICAgd2l0aENyZWRlbnRpYWxzCiAgICAgICAgfSA9IHRoaXMsCiAgICAgICAgZm1EYXRhID0gbmV3IEZvcm1EYXRhKCkKICAgICAgZm1EYXRhLmFwcGVuZChmaWVsZCwgZGF0YTJibG9iKGNyZWF0ZUltZ1VybCwgbWltZSksIGZpZWxkICsgJy4nICsgaW1nRm9ybWF0KQogICAgICAvLyDmt7vliqDlhbbku5blj4LmlbAKICAgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnICYmIHBhcmFtcykgewogICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaCgoaykgPT4gewogICAgICAgICAgZm1EYXRhLmFwcGVuZChrLCBwYXJhbXNba10pCiAgICAgICAgfSkKICAgICAgfQogICAgICAvLyDnm5HlkKzov5vluqblm57osIMKICAgICAgY29uc3QgdXBsb2FkUHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkgewogICAgICAgIGlmIChldmVudC5sZW5ndGhDb21wdXRhYmxlKSB7CiAgICAgICAgICB0aGF0LnByb2dyZXNzID0gMTAwICogTWF0aC5yb3VuZChldmVudC5sb2FkZWQpIC8gZXZlbnQudG90YWwKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8g5LiK5Lyg5paH5Lu2CiAgICAgIHRoYXQucmVzZXQoKQogICAgICB0aGF0LmxvYWRpbmcgPSAxCiAgICAgIHRoYXQuc2V0U3RlcCgzKQogICAgICByZXF1ZXN0KHsKICAgICAgICB1cmwsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgZGF0YTogZm1EYXRhCiAgICAgIH0pLnRoZW4ocmVzRGF0YSA9PiB7CiAgICAgICAgdGhhdC5sb2FkaW5nID0gMgogICAgICAgIHRoYXQuJGVtaXQoJ2Nyb3AtdXBsb2FkLXN1Y2Nlc3MnLCByZXNEYXRhLmRhdGEpCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgaWYgKHRoYXQudmFsdWUpIHsKICAgICAgICAgIHRoYXQubG9hZGluZyA9IDMKICAgICAgICAgIHRoYXQuaGFzRXJyb3IgPSB0cnVlCiAgICAgICAgICB0aGF0LmVycm9yTXNnID0gbGFuZy5mYWlsCiAgICAgICAgICB0aGF0LiRlbWl0KCdjcm9wLXVwbG9hZC1mYWlsJywgZXJyLCBmaWVsZCwga2kpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIOe7keWumuaMiemUrmVzY+makOiXj+atpOaPkuS7tuS6i+S7tgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4gewogICAgICBpZiAodGhpcy52YWx1ZSAmJiAoZS5rZXkgPT0gJ0VzY2FwZScgfHwgZS5rZXlDb2RlID09IDI3KSkgewogICAgICAgIHRoaXMub2ZmKCkKICAgICAgfQogICAgfSkKICB9Cn0K"},null]}